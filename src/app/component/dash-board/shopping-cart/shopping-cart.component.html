<div class="shopping-cart">
  <div class="shopping-cart__left">
    <div class="shopping-cart__product card shadow">
      <label class="shopping-cart__header-label" style="padding-bottom: 10px;">{{"Có " + totalProduct + " sản phẩm trong
        giỏ hàng"}}</label>
      <div class="shopping-cart__detail" *ngFor="let p of products, index as i">
        <div class="shopping-cart__thumb">
          <img [src]="p.images?.[0]?.path ?p.images?.[0]?.path :  './assets/icon/placeholder.svg'"
            class="attachment-woocommerce_thumbnail size-woocommerce_thumbnail" alt="Thanh toán" decoding="async"
            fetchpriority="high" title="Thanh toán">
        </div>
        <div class="shopping-cart__info">
          <div class="shopping-cart__name">
            <label class="shopping-cart__name--main">{{p.name}}</label>
            <label class="shopping-cart__name--description">{{p.name}}</label>
          </div>
          <div class="shopping-cart__subtotal">
            <label class="shopping-cart__subtotal--price">{{p.selectedPrice | CustomeCurrency}} ₫</label>
            <label class="shopping-cart__subtotal--list-price">{{p.listPrice | CustomeCurrency}} ₫</label>
          </div>
          <span class="w-100 mt-2" *ngIf="p.noWarranty">Chế độ bảo hành:</span>
          <select [(ngModel)]=p.warranty_type (change)="onWarrantyChange($event)" class="form-select w-50 mt-2" *ngIf="p.noWarranty">
            <option *ngIf="p.price && p.price!=0" value="1">1 Tháng</option>
            <option *ngIf="p.price6 && p.price6!=0" value="6">6 Tháng</option>
            <option *ngIf="p.price12 && p.price12!=0" value="12">12 Tháng</option>
            <option *ngIf="p.price15 && p.price15!=0" value="15">15 Tháng</option>
            <option *ngIf="p.price18 && p.price18!=0" value="18">18 Tháng</option>
            <option *ngIf="p.price24 && p.price24!=0" value="24">24 Tháng</option>
          </select>

          <div class="shopping-cart__remove mt-2">
            <a class="remove" aria-label="Xóa sản phẩm này" style="cursor: pointer"
              (click)="onRemoveFromCartClick(p)">Xóa</a>
          </div>
          <div class="shopping-cart__bottom">
            <label class="shopping-cart__bottom-label">Số lượng:</label>
            <input class="form-control shopping-cart__bottom-input" type="number" min="0" max="100"
              (change)="onQuantityChange(p)" maxlength="45" [(ngModel)]="p.quantity" />
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="shopping-cart__coupon card shadow">
      <label class="shopping-cart__coupon--label">Mã ưu đãi</label>
      <div class="shopping-cart__coupon--input">
        <input class="form-control" type="text" maxlength="45"/>
      </div>
      <div class="shopping-cart__coupon--button">
        <button type="button" class="btn btn-primary" id="check-coupon">Áp dụng</button>
      </div>
    </div> -->

    <div class="shopping-cart__totals card shadow">
      <label class="shopping-cart__totals--label">Cộng giỏ hàng</label>

      <div class="shopping-cart__shipping">
        <span class="shopping-cart__shipping--icons">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path
              d="M18.9565 9.17461L17.9065 6.54961C17.8174 6.32751 17.6637 6.13728 17.4653 6.00356C17.2668 5.86984 17.0328 5.79879 16.7935 5.79961H14.2V5.19961C14.2 5.04048 14.1368 4.88787 14.0243 4.77535C13.9117 4.66282 13.7591 4.59961 13.6 4.59961H2.2C1.88174 4.59961 1.57652 4.72604 1.35147 4.95108C1.12643 5.17612 1 5.48135 1 5.79961V14.1996C1 14.5179 1.12643 14.8231 1.35147 15.0481C1.57652 15.2732 1.88174 15.3996 2.2 15.3996H3.475C3.60718 15.9159 3.90742 16.3734 4.32839 16.7002C4.74935 17.027 5.2671 17.2043 5.8 17.2043C6.3329 17.2043 6.85065 17.027 7.27161 16.7002C7.69258 16.3734 7.99282 15.9159 8.125 15.3996H11.875C12.0072 15.9159 12.3074 16.3734 12.7284 16.7002C13.1494 17.027 13.6671 17.2043 14.2 17.2043C14.7329 17.2043 15.2506 17.027 15.6716 16.7002C16.0926 16.3734 16.3928 15.9159 16.525 15.3996H17.8C18.1183 15.3996 18.4235 15.2732 18.6485 15.0481C18.8736 14.8231 19 14.5179 19 14.1996V9.39961C19.0002 9.3225 18.9854 9.24609 18.9565 9.17461ZM14.2 6.99961H16.7935L17.5135 8.79961H14.2V6.99961ZM2.2 5.79961H13V10.5996H2.2V5.79961ZM5.8 15.9996C5.56266 15.9996 5.33065 15.9292 5.13332 15.7974C4.93598 15.6655 4.78217 15.4781 4.69134 15.2588C4.60052 15.0396 4.57676 14.7983 4.62306 14.5655C4.66936 14.3327 4.78365 14.1189 4.95147 13.9511C5.11929 13.7833 5.33311 13.669 5.56589 13.6227C5.79867 13.5764 6.03995 13.6001 6.25922 13.691C6.47849 13.7818 6.66591 13.9356 6.79776 14.1329C6.92962 14.3303 7 14.5623 7 14.7996C7 15.1179 6.87357 15.4231 6.64853 15.6481C6.42348 15.8732 6.11826 15.9996 5.8 15.9996ZM11.875 14.1996H8.125C7.99282 13.6834 7.69258 13.2258 7.27161 12.899C6.85065 12.5723 6.3329 12.3949 5.8 12.3949C5.2671 12.3949 4.74935 12.5723 4.32839 12.899C3.90742 13.2258 3.60718 13.6834 3.475 14.1996H2.2V11.7996H13V12.7229C12.7241 12.8823 12.4826 13.095 12.2895 13.3485C12.0964 13.602 11.9555 13.8913 11.875 14.1996ZM14.2 15.9996C13.9627 15.9996 13.7307 15.9292 13.5333 15.7974C13.336 15.6655 13.1822 15.4781 13.0913 15.2588C13.0005 15.0396 12.9768 14.7983 13.0231 14.5655C13.0694 14.3327 13.1836 14.1189 13.3515 13.9511C13.5193 13.7833 13.7331 13.669 13.9659 13.6227C14.1987 13.5764 14.4399 13.6001 14.6592 13.691C14.8785 13.7818 15.0659 13.9356 15.1978 14.1329C15.3296 14.3303 15.4 14.5623 15.4 14.7996C15.4 15.1179 15.2736 15.4231 15.0485 15.6481C14.8235 15.8732 14.5183 15.9996 14.2 15.9996ZM17.8 14.1996H16.525C16.3912 13.6846 16.0904 13.2285 15.6697 12.9028C15.249 12.5771 14.7321 12.4001 14.2 12.3996V9.99961H17.8V14.1996Z"
              fill="#ED773D"></path>
          </svg>
        </span>
        <span class="shopping-cart__shipping--text">
          - Giá trị đơn hàng chưa bao gồm chi phí vận chuyển.
          <br>
          - Miễn phí vận chuyển tối đa 2% tổng giá trị đơn hàng, tối đa 1.000.000 đồng. Áp dụng cho đơn hàng &gt;
          500.000 đồng.
        </span>
      </div>
      <div class="shopping-cart__temptotal">
        <label class="shopping-cart__temptotal--label">Tạm tính</label>
        <label class="shopping-cart__temptotal--price"> {{tempTotalPrice | CustomeCurrency}} ₫
        </label>
      </div>
      <hr width="100%">
      <div class="shopping-cart__total">
        <label class="shopping-cart__total--label">Tổng</label>
        <label class="shopping-cart__total--price">{{totalPrice | CustomeCurrency}} ₫</label>
      </div>

      <div class="shopping-cart__totals--button">
        <button class="btn btn-primary" (click)="onSubmitClick()">Xác nhận đặt hàng</button>
      </div>
    </div>
  </div>
  <div class="shopping-cart__right">
    <div class="shopping-cart__payment card shadow">
      <label class="shopping-cart__payment--label">Thông tin thanh toán</label>
      <div class="shopping-cart__gender">
        <div class="form-check shopping-cart__gender--radio" *ngFor="let option of genders">
          <input class="form-check-input" type="radio" [value]="option.value" [(ngModel)]="gender"
            name="flexRadioGender" [id]="'flexRadioGender' + option.value" (click)="onGenderClick(option)" />
          <label class="form-check-label" [for]="'flexRadioGender' + option.value">{{ option.value }}</label>
        </div>
      </div>
      <div class="shopping-cart__user-info">
        <input class="form-control shopping-cart__user-info--name" type="text" (input)="onNameInput($event)"
          maxlength="45" placeholder="Họ và tên" [(ngModel)]="customer_name" />
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('customer_name').hasError('required')">
          Vui lòng nhập tên khách hàng</small>
        <input class="form-control shopping-cart__user-info--phone" type="tel" (input)="onPhoneInput($event)"
          maxlength="11" placeholder="Số điện thoại" [(ngModel)]="customer_phone" inputmode="numeric"
          pattern="[0-9]*" />
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('customer_phone').hasError('required')|| !this.checkOnlyNumber(customer_phone);">
          Vui lòng nhập Số điện thoại</small>
        <input class="form-control shopping-cart__user-info--email" type="email" (input)="onEmailInput($event)"
          maxlength="45" placeholder="Email" [(ngModel)]="customer_email" />
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('customer_email').hasError('required')">
          Vui lòng nhập Email</small>
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('customer_email').hasError('email')">
          Vui lòng nhập Email đúng </small>
      </div>
      <hr width="100%">
      <label class="shopping-cart__payment--label-small">Hình thức nhận hàng </label>
      <div class="shopping-cart__gender">
        <div class="form-check shopping-cart__gender--radio" *ngFor="let option of typeDeliverys">
          <input class="form-check-input" type="radio" name="flexRadioMethodReceive" [value]="option.value"
            [(ngModel)]="typeDelivery" [id]="'flexRadioMethodReceive' + option.value"
            (click)="typeDeliveryClick(option.value)" />
          <label class="form-check-label" [for]="'flexRadioMethodReceive' + option.value">{{ option.value }}</label>
        </div>
      </div>
      <div *ngIf="typeDelivery == 'Nhận tại cửa hàng' else shipHome ">
        <div class="form-check shopping-cart__gender--radio" *ngFor="let option of homeLocation">
          <input class="form-check-input" type="radio" name="storeAddress" [value]="option.value"
            [(ngModel)]="storeAddress" [id]="'storeAddress' + option.value" (click)="storeAddressClick(option)" />
          <label class="form-check-label" [for]="'storeAddress' + option.value">{{ option.value }}</label>
        </div>
      </div>
      <ng-template #shipHome>
        <select (ngModelChange)="onCityChange($event)" [(ngModel)]=selectedCity
          class="form-select shopping-cart__payment--city" placeholder="Tỉnh/Thành phố">
          <option value="undefined">Tỉnh/Thành phố</option>
          <option [ngValue]="city" *ngFor="let city of cities, index as i">{{city.Name}} </option>
        </select>
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('selectedCity').hasError('required')">
          Vui lòng chọn Tỉnh/Thành phố</small>

        <select (ngModelChange)="onDistrictsChange($event)" [(ngModel)]=selectedDistrict
          class="form-select shopping-cart__payment--district" placeholder="Quận/Huyện">
          <option value="undefined">Quận/Huyện</option>
          <option [ngValue]="district" *ngFor="let district of districts, index as i">{{district.Name}} </option>
        </select>
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('selectedDistrict').hasError('required')">
          Vui lòng chọn Quận/Huyện</small>

        <select (ngModelChange)="onWardsChange($event)" [(ngModel)]=selectedWard
          class="form-select  shopping-cart__payment--wards" placeholder="Phường/Xã">
          <option value="undefined">Phường/Xã</option>
          <option [ngValue]="ward" *ngFor="let ward of wards, index as i">{{ward.Name}}</option>
        </select>
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('selectedWard').hasError('required')">
          Vui lòng chọn Phường/Xã</small>

        <textarea class="form-control  shopping-cart__payment--address" placeholder="Địa chỉ"
          (input)="onAddressInput($event)" rows="5" [(ngModel)]=address></textarea>
        <small style="color: red;padding: 5px;margin-left: 5px;"
          *ngIf="shoppingCartForm.get('address').hasError('required')">
          Vui lòng điền địa chỉ</small>
      </ng-template>

    </div>
    <div class="shopping-cart__method card shadow">
      <label class="shopping-cart__method--label">Hình thức thanh toán</label>
      <div class="shopping-cart__method-radio-group">
        <div class="form-check shopping-cart__gender--radio" *ngFor="let method of paymentMethods">
          <input class="form-check-input" type="radio" [value]="method.value" name="flexRadioMethodPayment"
            [id]="'flexRadio' + method.value" [(ngModel)]="paymentMethod" (click)="PaymenMethodClick(method)" />
          <label class="form-check-label" [for]="'flexRadio' + method.value">{{ method.value }}</label>
        </div>
      </div>
      <hr width="100%">
      <div class="shopping-cart__description">
        <label *ngIf="labelContent != null && !isOnlinePay">{{labelContent}}</label>
        <div *ngIf="isOnlinePay && labelContent == null">
          <label>Thanh toán trực tuyến qua tài khoản ngân hàng (Internet Banking) hoặc Thẻ tín dụng hoặc Trả góp. Dịch
            vụ được đảm bảo bởi cổng thanh toán Alepay.</label>
          <div class="shopping-cart__method-radio-group">
            <div class="form-check shopping-cart__gender--radio" *ngFor="let OnlinePayment of typeOnlinePayments">
              <input class="form-check-input" type="radio" [value]="OnlinePayment.value" name="flexRadioOnlinePayment"
                [id]="'flexRadio' + OnlinePayment.value" [(ngModel)]="typeOnlinePayment"
                (click)="typeOnlinePaymentClick(OnlinePayment)" />
              <label class="form-check-label" [for]="'flexRadio' + OnlinePayment.value">{{ OnlinePayment.value
                }}</label>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>

</div>
